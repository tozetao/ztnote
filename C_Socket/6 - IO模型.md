### 阻塞

TCP套接字默认情况下是阻塞模式。

在阻塞模式下，调用read()读取数据时，如果缓冲区没有数据，程序将会阻塞在这里，直到接收缓冲区有数据为止。

而调用write()发送数据时：

- 如果缓冲区的可用长度小于要发送的数据，那么write()会被阻塞。直到缓冲区中的数据被发送到目标机器，腾出足够的空间，才能唤醒write()函数继续写入数据。
- 如果TCP协议正在发送数据，那么输出缓冲区会被阻塞，直到输出所有数据write()才会被唤醒。

当应用程序的数据全部写入到内核输出缓冲区时，write()函数才会返回。

这便是TCP的默认阻塞方式，所谓阻塞就是上一步动作没有完成，下一步动物将暂停，直到上一步动作完成后才能继续，以保持同步性。

```c
socket();

bind();

listen();

int clnt_sock = accept();

//如果是阻塞模式，所连接的socket输入缓冲区没有数据的话将会阻塞在这里。
read(clnt_sock, buffer, size);		
```





注：

1. 阻塞模式下需要考虑触发信号时的情况，例如read()阻塞时触发信号。



非阻塞





### IO复用



信号
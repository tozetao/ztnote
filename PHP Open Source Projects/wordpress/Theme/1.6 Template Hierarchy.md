# Template Hierarchy

As discussed, [template files](https://developer.wordpress.org/themes/basics/template-files/) are modular, reusable files, used to generate the web pages on your WordPress site. Some template files (such as the header and footer template) are used on all of your siteâ€™s pages, while others are used only under specific conditions.

å¦‚å‰æ‰€è¿°ï¼Œæ¨¡æ¿æ–‡ä»¶æ˜¯æ¨¡å—åŒ–ã€å¯é‡å¤ä½¿ç”¨çš„æ–‡ä»¶ï¼Œç”¨äºŽåœ¨ WordPress ç½‘ç«™ä¸Šç”Ÿæˆç½‘é¡µã€‚ä¸€äº›æ¨¡æ¿æ–‡ä»¶ï¼ˆå¦‚é¡µçœ‰å’Œé¡µè„šæ¨¡æ¿ï¼‰ç”¨äºŽç½‘ç«™çš„æ‰€æœ‰é¡µé¢ï¼Œè€Œå¦ä¸€äº›åˆ™åªåœ¨ç‰¹å®šæ¡ä»¶ä¸‹ä½¿ç”¨ã€‚

This article explains **how WordPress determines which template file(s) to use on individual pages**. If you want to customize an existing WordPress theme it will help you decide which template file needs to be edited.

æœ¬æ–‡å°†è§£é‡Š WordPress å¦‚ä½•å†³å®šåœ¨å„ä¸ªé¡µé¢ä¸Šä½¿ç”¨å“ªä¸ªï¼ˆäº›ï¼‰æ¨¡æ¿æ–‡ä»¶ã€‚å¦‚æžœä½ æƒ³å®šåˆ¶çŽ°æœ‰çš„ WordPress ä¸»é¢˜ï¼Œå®ƒå°†å¸®åŠ©ä½ å†³å®šéœ€è¦ç¼–è¾‘å“ªä¸ªæ¨¡æ¿æ–‡ä»¶ã€‚

> Tip:You can also use [Conditional Tags](https://developer.wordpress.org/themes/basics/conditional-tags/) to control which templates are loaded on a specific page.
>
> æç¤ºï¼šæ‚¨è¿˜å¯ä»¥ä½¿ç”¨æ¡ä»¶æ ‡ç­¾æ¥æŽ§åˆ¶åœ¨ç‰¹å®šé¡µé¢ä¸ŠåŠ è½½å“ªäº›æ¨¡æ¿ã€‚



## [The Template File Hierarchy](https://developer.wordpress.org/themes/basics/template-hierarchy/#the-template-file-hierarchy)

æ¨¡æ¿æ–‡ä»¶å±‚æ¬¡ç»“æž„



### [Overview](https://developer.wordpress.org/themes/basics/template-hierarchy/#overview)

WordPress uses the [query string](https://wordpress.org/support/article/glossary/#query-string) to decide which template or set of templates should be used to display the page. The query string is information that is contained in the link to each part of your website.

WordPress ä½¿ç”¨æŸ¥è¯¢å­—ç¬¦ä¸²æ¥å†³å®šä½¿ç”¨å“ªä¸ªæ¨¡æ¿æˆ–å“ªç»„æ¨¡æ¿æ¥æ˜¾ç¤ºé¡µé¢ã€‚æŸ¥è¯¢å­—ç¬¦ä¸²æ˜¯ç½‘ç«™å„éƒ¨åˆ†é“¾æŽ¥ä¸­åŒ…å«çš„ä¿¡æ¯ã€‚

Put simply, WordPress searches down through the template hierarchy until it finds a matching template file. To determine which template file to use, WordPress:

ç®€å•åœ°è¯´ï¼ŒWordPress é€šè¿‡æ¨¡æ¿å±‚æ¬¡ç»“æž„å‘ä¸‹æœç´¢ï¼Œç›´åˆ°æ‰¾åˆ°åŒ¹é…çš„æ¨¡æ¿æ–‡ä»¶ã€‚è¦ç¡®å®šä½¿ç”¨å“ªä¸ªæ¨¡æ¿æ–‡ä»¶ï¼ŒWordPressï¼š

1. Matches every query string to a query type to decide which page is being requested (for example, a search page, a category page, etc);

   å°†æ¯ä¸ªæŸ¥è¯¢å­—ç¬¦ä¸²ä¸ŽæŸ¥è¯¢ç±»åž‹åŒ¹é…ï¼Œä»¥ç¡®å®šè¯·æ±‚çš„æ˜¯å“ªä¸ªé¡µé¢ï¼ˆä¾‹å¦‚ï¼Œæœç´¢é¡µé¢ã€åˆ†ç±»é¡µé¢ç­‰ï¼‰ï¼›

2. Selects the template in the order determined by the template hierarchy;

   æŒ‰ç…§æ¨¡æ¿å±‚æ¬¡ç»“æž„ç¡®å®šçš„é¡ºåºé€‰æ‹©æ¨¡æ¿ï¼›

3. Looks for template files with specific names in the current themeâ€™s directory and uses the **first matching template file** as specified by the hierarchy.

   åœ¨å½“å‰ä¸»é¢˜ç›®å½•ä¸­æŸ¥æ‰¾å…·æœ‰ç‰¹å®šåç§°çš„æ¨¡æ¿æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨å±‚æ¬¡ç»“æž„ä¸­æŒ‡å®šçš„ç¬¬ä¸€ä¸ªåŒ¹é…æ¨¡æ¿æ–‡ä»¶ã€‚

With the exception of the basic `index.php` template file, you can choose whether you want to implement a particular template file or not.

é™¤åŸºæœ¬çš„ index.php æ¨¡æ¿æ–‡ä»¶å¤–ï¼Œæ‚¨å¯ä»¥é€‰æ‹©æ˜¯å¦å®žçŽ°ç‰¹å®šçš„æ¨¡æ¿æ–‡ä»¶ã€‚

> Tip: In these examples, the PHP file extension is used. In block themes, HTML files are used instead, but the template hierarchy is the same.
>
> æç¤ºï¼šåœ¨è¿™äº›ç¤ºä¾‹ä¸­ï¼Œä½¿ç”¨çš„æ˜¯ PHP æ–‡ä»¶æ‰©å±•åã€‚åœ¨å—ä¸»é¢˜ä¸­ï¼Œä½¿ç”¨çš„æ˜¯ HTML æ–‡ä»¶ï¼Œä½†æ¨¡æ¿å±‚æ¬¡ç»“æž„æ˜¯ä¸€æ ·çš„ã€‚

If WordPress cannot find a template file with a matching name, it will skip to the next file in the hierarchy. If WordPress cannot find any matching template file, the themeâ€™s `index.php` file will be used.

å¦‚æžœ WordPress æ— æ³•æ‰¾åˆ°åç§°åŒ¹é…çš„æ¨¡æ¿æ–‡ä»¶ï¼Œå®ƒå°†è·³åˆ°å±‚æ¬¡ç»“æž„ä¸­çš„ä¸‹ä¸€ä¸ªæ–‡ä»¶ã€‚å¦‚æžœWordPressæ‰¾ä¸åˆ°åŒ¹é…çš„æ¨¡æ¿æ–‡ä»¶ï¼Œå°±ä¼šä½¿ç”¨ä¸»é¢˜çš„index.phpæ–‡ä»¶ã€‚

When you are using a [child theme](https://developer.wordpress.org/themes/advanced-topics/child-themes/), any file you add to your child theme will over-ride the same file in the parent theme. For example, both themes contain the same template `category.php`, then child themeâ€™s template is used.

ä½¿ç”¨å­ä¸»é¢˜æ—¶ï¼Œæ·»åŠ åˆ°å­ä¸»é¢˜ä¸­çš„ä»»ä½•æ–‡ä»¶éƒ½å°†å–ä»£çˆ¶ä¸»é¢˜ä¸­çš„ç›¸åŒæ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œå¦‚æžœä¸¤ä¸ªä¸»é¢˜éƒ½åŒ…å«ç›¸åŒçš„æ¨¡æ¿ category.phpï¼Œé‚£ä¹ˆå°±ä¼šä½¿ç”¨å­ä¸»é¢˜çš„æ¨¡æ¿ã€‚

If a child theme contains the specific template such as `category-unicorns.php` and the parent theme contains lower prioritized template such as `category.php`, then child themeâ€™s `category-unicorns.php` is used.
å¦‚æžœå­ä¸»é¢˜åŒ…å«ç‰¹å®šæ¨¡æ¿ï¼ˆå¦‚ category-unicorns.phpï¼‰ï¼Œè€Œçˆ¶ä¸»é¢˜åŒ…å«ä¼˜å…ˆçº§è¾ƒä½Žçš„æ¨¡æ¿ï¼ˆå¦‚ category.phpï¼‰ï¼Œåˆ™ä½¿ç”¨å­ä¸»é¢˜çš„ category-unicorns.phpã€‚

Contrary, if a child theme contains general template only such as `category.php` and the parent theme contains the specific one such as `category-unicorns.php`, then parentâ€™s template `category-unicorns.php` is used.

ç›¸åï¼Œå¦‚æžœå­ä¸»é¢˜åªåŒ…å«ä¸€èˆ¬æ¨¡æ¿ï¼ˆå¦‚ category.phpï¼‰ï¼Œè€Œçˆ¶ä¸»é¢˜åŒ…å«ç‰¹å®šæ¨¡æ¿ï¼ˆå¦‚ category-unicorns.phpï¼‰ï¼Œåˆ™ä¼šä½¿ç”¨çˆ¶ä¸»é¢˜çš„æ¨¡æ¿ category-unicorns.phpã€‚



### [Examples](https://developer.wordpress.org/themes/basics/template-hierarchy/#examples)

If your blog is at `http://example.com/blog/` and a visitor clicks on a link to a category page such as `http://example.com/blog/category/your-cat/`, WordPress looks for a template file in the current themeâ€™s directory that matches the categoryâ€™s ID to generate the correct page. More specifically, WordPress follows this procedure:

å¦‚æžœæ‚¨çš„åšå®¢ä½äºŽ http://example.com/blog/ï¼Œè®¿é—®è€…ç‚¹å‡»é“¾æŽ¥è¿›å…¥åˆ†ç±»é¡µé¢ï¼ˆå¦‚ http://example.com/blog/category/your-cat/ï¼‰ï¼ŒWordPress ä¼šåœ¨å½“å‰ä¸»é¢˜ç›®å½•ä¸­æŸ¥æ‰¾ä¸Žåˆ†ç±» ID åŒ¹é…çš„æ¨¡æ¿æ–‡ä»¶ï¼Œä»¥ç”Ÿæˆæ­£ç¡®çš„é¡µé¢ã€‚æ›´å…·ä½“åœ°è¯´ï¼ŒWordPress éµå¾ªä»¥ä¸‹ç¨‹åºï¼š

1. Looks for a template file in the current themeâ€™s directory that matches the categoryâ€™s slug. If the category slug is â€œunicorns,â€ then WordPress looks for a template file named `category-unicorns.php`.

   åœ¨å½“å‰ä¸»é¢˜ç›®å½•ä¸­æŸ¥æ‰¾ä¸Žåˆ†ç±»slugç›¸åŒ¹é…çš„æ¨¡æ¿æ–‡ä»¶ã€‚æ¯”å¦‚åˆ†ç±»slugæ˜¯ "unicorns"ï¼ŒWordPress å°±ä¼šæŸ¥æ‰¾åä¸º category-unicorns.php çš„æ¨¡æ¿æ–‡ä»¶ã€‚

2. If `category-unicorns.php` is missing and the categoryâ€™s ID is 4, WordPress looks for a template file named `category-4.php`.

   å¦‚æžœç¼ºå°‘ category-unicorns.phpï¼Œè€Œç±»åˆ«çš„ ID æ˜¯ 4ï¼ŒWordPress å°±ä¼šæŸ¥æ‰¾åä¸º category-4.php çš„æ¨¡æ¿æ–‡ä»¶ã€‚

3. If `category-4.php` is missing, WordPress will look for a generic category template file, `category.php`.

   å¦‚æžœç¼ºå°‘ category-4.phpï¼ŒWordPress å°†å¯»æ‰¾ä¸€ä¸ªé€šç”¨çš„ç±»åˆ«æ¨¡æ¿æ–‡ä»¶ category.phpã€‚

4. If `category.php` does not exist, WordPress will look for a generic archive template, `archive.php`.

   å¦‚æžœä¸å­˜åœ¨ category.phpï¼ŒWordPress å°†å¯»æ‰¾ä¸€ä¸ªé€šç”¨çš„å½’æ¡£æ¨¡æ¿ archive.phpã€‚

5. If `archive.php` is also missing, WordPress will fall back to the main theme template file, `index.php`.

   å¦‚æžœ archive.php ä¹Ÿä¸å­˜åœ¨ï¼ŒWordPress å°†è¿”å›žåˆ°ä¸»ä¸»é¢˜æ¨¡æ¿æ–‡ä»¶ index.phpã€‚





### [Visual Overview](https://developer.wordpress.org/themes/basics/template-hierarchy/#visual-overview)

The following diagram shows which template files are called to generate a WordPress page based on the WordPress template hierarchy.

ä¸‹å›¾æ˜¾ç¤ºäº†æ ¹æ® WordPress æ¨¡æ¿å±‚æ¬¡ç»“æž„ï¼Œè°ƒç”¨å“ªäº›æ¨¡æ¿æ–‡ä»¶æ¥ç”Ÿæˆ WordPress é¡µé¢ã€‚

![](./Screenshot-2019-01-23-00.20.04.png)



## [The Template Hierarchy In Detail](https://developer.wordpress.org/themes/basics/template-hierarchy/#the-template-hierarchy-in-detail)

While the template hierarchy is easier to understand as a diagram, the following sections describe the order in which template files are called by WordPress for a number of query types.

è™½ç„¶æ¨¡æ¿çš„å±‚æ¬¡ç»“æž„ä»¥å›¾è¡¨çš„å½¢å¼æ›´å®¹æ˜“ç†è§£ï¼Œä½†ä¸‹é¢å‡ èŠ‚å°†ä»‹ç» WordPress åœ¨ä¸€äº›æŸ¥è¯¢ç±»åž‹ä¸­è°ƒç”¨æ¨¡æ¿æ–‡ä»¶çš„é¡ºåºã€‚



### [Home Page display](https://developer.wordpress.org/themes/basics/template-hierarchy/#home-page-display)

By default, WordPress sets your siteâ€™s home page to display your latest blog posts. This page is called the blog posts index. You can also set your blog posts to display on a separate static page. The template file `home.php` is used to render the blog posts index, whether it is being used as the front page or on separate static page. If `home.php` does not exist, WordPress will use `index.php`.

é»˜è®¤æƒ…å†µä¸‹ï¼ŒWordPress ä¼šå°†æ‚¨ç½‘ç«™çš„ä¸»é¡µè®¾ç½®ä¸ºæ˜¾ç¤ºæ‚¨çš„æœ€æ–°åšæ–‡ã€‚è¯¥é¡µé¢ç§°ä¸ºåšæ–‡ç´¢å¼•é¡µï¼ˆblog posts indexï¼‰ã€‚æ‚¨ä¹Ÿå¯ä»¥å°†åšå®¢æ–‡ç« è®¾ç½®ä¸ºä¸€ä¸ªå•ç‹¬æ˜¾ç¤ºçš„é™æ€é¡µé¢ã€‚æ— è®ºæ˜¯ä½œä¸ºä¸»é¡µè¿˜æ˜¯å•ç‹¬çš„é™æ€é¡µé¢ï¼Œæ¨¡æ¿æ–‡ä»¶ home.php éƒ½å°†ç”¨äºŽæ˜¾ç¤ºåšæ–‡ç´¢å¼•é¡µã€‚å¦‚æžœ home.php ä¸å­˜åœ¨ï¼ŒWordPress å°†ä½¿ç”¨ index.phpã€‚

1. `home.php`
2. `index.php`

> Note: If `front-page.php` exists, it will override the `home.php` template.
>
> æ³¨ï¼šå¦‚æžœå­˜åœ¨front-page.phpæ–‡ä»¶ï¼Œå®ƒå°†ä¼šè¦†ç›–home.phpæ¨¡æ¿ã€‚



### [Front Page display](https://developer.wordpress.org/themes/basics/template-hierarchy/#front-page-display)

The `front-page.php` template file is used to render your siteâ€™s front page, whether the front page displays the blog posts index (mentioned above) or a static page. The front page template takes precedence over the blog posts index (`home.php`) template. If the `front-page.php` file does not exist, WordPress will either use the `home.php` or `page.php` files depending on the setup in Settings â†’ Reading. If neither of those files exist, it will use the `index.php` file.

front-page.php æ¨¡æ¿æ–‡ä»¶ç”¨äºŽæ˜¾ç¤ºç½‘ç«™çš„ä¸»é¡µï¼Œæ— è®ºä¸»é¡µæ˜¾ç¤ºçš„æ˜¯åšæ–‡ç´¢å¼•é¡µï¼ˆå¦‚ä¸Šæ‰€è¿°ï¼‰è¿˜æ˜¯é™æ€é¡µé¢ã€‚front pageæ¨¡æ¿ä¼˜é«˜äºŽåšæ–‡ç´¢å¼•ï¼ˆhome.phpï¼‰æ¨¡æ¿ã€‚

å¦‚æžœ front-page.php æ–‡ä»¶ä¸å­˜åœ¨ï¼ŒWordPress å°†æ ¹æ®Settings â†’ Readingä¸­çš„è®¾ç½®ä½¿ç”¨ home.php æˆ– page.php æ–‡ä»¶ã€‚å¦‚æžœè¿™ä¸¤ä¸ªæ–‡ä»¶éƒ½ä¸å­˜åœ¨ï¼ŒWordPress å°†ä½¿ç”¨ index.php æ–‡ä»¶ã€‚

1. `front-page.php` â€“ Used for both â€œ**your latest posts**â€ or â€œ**a static page**â€ as set in the **front page displays** section of Settings â†’ Reading.

   front-page.php - ç”¨äºŽ "æ‚¨çš„æœ€æ–°æ–‡ç«  "æˆ– "ä¸€ä¸ªé™æ€é¡µé¢"ï¼Œåœ¨ "è®¾ç½®"â†’"é˜…è¯» "çš„ "ä¸»é¡µæ˜¾ç¤º "éƒ¨åˆ†è¿›è¡Œè®¾ç½®ã€‚

2. `home.php` â€“ If WordPress cannot find `front-page.php` and â€œ**your latest posts**â€ is set in the **front page displays** section, it will look for `home.php`. Additionally, WordPress will look for this file when the **posts page** is set in the **front page displays** section.

   å¦‚æžœ"ä¸»é¡µæ˜¾ç¤º"éƒ¨åˆ†è®¾ç½®äº†"ä½ æœ€è¿‘çš„å¸–å­"ï¼ŒWordPressåœ¨æ‰¾ä¸åˆ°front-page.phpæ–‡ä»¶æ—¶å°†ä¼šå¯»æ‰¾home.phpæ–‡ä»¶ã€‚æ­¤å¤–"ä¸»é¡µæ˜¾ç¤º"éƒ¨åˆ†è®¾ç½®äº†posts pageæ—¶ï¼ŒWordPressiä¹Ÿä¼šå¯»æ‰¾è¯¥æ–‡ä»¶ã€‚

3. `page.php` â€“ When â€œ**front page**â€ is set in the **front page displays** section.

   å½“"ä¸»é¡µæ˜¾ç¤º"éƒ¨åˆ†è®¾ç½®äº†front pageæ—¶ï¼ˆå³è®¾ç½®äº†homepageé€‰é¡¹ï¼‰ï¼Œä¼šä½¿ç”¨page.phpæ–‡ä»¶ã€‚

4. `index.php` â€“ When â€œ**your latest posts**â€ is set in the **front page displays** section but `home.php` does not exist *or* when **front page** is set but `page.php` does not exist.

   å½“"ä¸»é¡µæ˜¾ç¤º"æ˜¾ç¤ºéƒ¨åˆ†è®¾ç½®äº†"ä½ æœ€è¿‘çš„å¸–å­"æ—¶ä½†æ˜¯home.phpä¸å­˜åœ¨ï¼Œæˆ–è€…è®¾ç½®äº†Homepageä½†æ˜¯page.phpä¸å­˜åœ¨æ—¶ï¼Œå°±ä¼šä½¿ç”¨index.phpæ–‡ä»¶ã€‚

As you can see, there are a lot of rules to what path WordPress takes. Using the chart above is the best way to determine what WordPress will display.





### [Privacy Policy Page display](https://developer.wordpress.org/themes/basics/template-hierarchy/#privacy-policy-page-display)

éšç§æ”¿ç­–é¡µé¢æ˜¾ç¤º

The `privacy-policy.php` template file is used to render your siteâ€™s Privacy Policy page. The Privacy Policy page template takes precedence over the static page (`page.php`) template. If the `privacy-policy.php` file does not exist, WordPress will either use the `page.php` or `singular.php` files depending on the available templates. If neither of those files exist, it will use the `index.php` file.

privacy-policy.php æ¨¡æ¿æ–‡ä»¶ç”¨äºŽæ˜¾ç¤ºç½‘ç«™çš„éšç§æ”¿ç­–é¡µé¢ã€‚éšç§æ”¿ç­–é¡µé¢æ¨¡æ¿ä¼˜å…ˆäºŽé™æ€é¡µé¢ï¼ˆpage.phpï¼‰æ¨¡æ¿ã€‚å¦‚æžœ privacy-policy.php æ–‡ä»¶ä¸å­˜åœ¨ï¼ŒWordPress å°†æ ¹æ®å¯ç”¨æ¨¡æ¿ä½¿ç”¨ page.php æˆ– singular.php æ–‡ä»¶ã€‚å¦‚æžœè¿™ä¸¤ä¸ªæ–‡ä»¶éƒ½ä¸å­˜åœ¨ï¼ŒWordPress å°†ä½¿ç”¨ index.php æ–‡ä»¶ã€‚

1. `privacy-policy.php` â€“ Used for the Privacy Policy page set in the **Change your Privacy Policy page** section of Settings â†’ Privacy.

   ç”¨äºŽåœ¨"è®¾ç½®" -> "éšç§"éƒ¨åˆ†è®¾ç½®çš„éšè—æ”¿ç­–é¡µé¢ã€‚

2. `custom template file` â€“ The [page template](https://developer.wordpress.org/themes/template-files-section/page-template-files/) assigned to the page. See `get_page_templates()`.

   åˆ†é…ç»™é¡µé¢çš„é¡µé¢æ¨¡æ¿ã€‚è¯·å‚é˜… get_page_templates()ã€‚

3. `page-{slug}.php` â€“ If the page slug is `privacy`, WordPress will look to use `page-privacy.php`.

   å¦‚æžœé¡µé¢çš„slugæ˜¯privacyï¼ŒWordPresså°†ä¼šå¯»æ‰¾å¹¶ä½¿ç”¨page-privacy.phpæ–‡ä»¶ã€‚

4. `page-{id}.php` â€“ If the page ID is 6, WordPress will look to use `page-6.php`.

   å¦‚æžœéšç§é¡µé¢çš„IDæ˜¯6ï¼ŒWordPresså°†ä¼šå¯»æ‰¾å¹¶ä½¿ç”¨page-6.phpæ–‡ä»¶ã€‚

5. `page.php`

6. `singular.php`

7. `index.php`



### [Single Post](https://developer.wordpress.org/themes/basics/template-hierarchy/#single-post)

The single post template file is used to render a single post. WordPress uses the following path:

å•æ–‡ç« æ¨¡æ¿æ–‡ä»¶ç”¨äºŽå‘ˆçŽ°å•ç¯‡æ–‡ç« ã€‚WordPress ä½¿ç”¨ä»¥ä¸‹è·¯å¾„ï¼š

1. `single-{post-type}-{slug}.php` â€“ (Since 4.4) First, WordPress looks for a template for the specific post. For example, if [post type](https://developer.wordpress.org/themes/basics/post-types/) is `product` and the post slug is `dmc-12`, WordPress would look for `single-product-dmc-12.php`.

   single-{post-type}-{slug}.php -ï¼ˆè‡ª 4.4 èµ·ï¼‰é¦–å…ˆï¼ŒWordPress ä¼šæŸ¥æ‰¾ç‰¹å®šå¸–å­çš„æ¨¡æ¿ã€‚ä¾‹å¦‚ï¼Œå¦‚æžœå¸–å­ç±»åž‹æ˜¯productï¼Œå¸–å­æ ‡é¢˜æ˜¯ dmc-12ï¼ŒWordPress å°±ä¼šæŸ¥æ‰¾ single-product-dmc-12.phpã€‚

2. `single-{post-type}.php` â€“ If the post type is `product`, WordPress would look for `single-product.php`.

   single-{post-type}.php - å¦‚æžœå¸–å­ç±»åž‹æ˜¯äº§å“ï¼ŒWordPress å°†æŸ¥æ‰¾ single-product.phpã€‚

3. `single.php` â€“ WordPress then falls back to `single.php`.

   single.php - WordPress ä¼šè¿”å›ž single.phpã€‚

4. `singular.php` â€“ Then it falls back to `singular.php`.

   singular.php - ç„¶åŽè¿”å›ž singular.phpã€‚

5. `index.php` â€“ Finally, as mentioned above, WordPress ultimately falls back to `index.php`.

   index.php - æœ€åŽï¼Œå¦‚ä¸Šæ‰€è¿°ï¼ŒWordPress æœ€ç»ˆä¼šè¿”å›žåˆ° index.phpã€‚



### [Single Page](https://developer.wordpress.org/themes/basics/template-hierarchy/#single-page)

The template file used to render a static page (`page` post-type). Note that unlike other post-types, `page` is special to WordPress and uses the following path:

ç”¨äºŽå‘ˆçŽ°é™æ€é¡µé¢ï¼ˆpage post ç±»åž‹ï¼‰çš„æ¨¡æ¿æ–‡ä»¶ã€‚è¯·æ³¨æ„ï¼Œä¸Žå…¶ä»–å¸–å­ç±»åž‹ä¸åŒï¼Œé¡µé¢æ˜¯ WordPress çš„ç‰¹æ®Šç±»åž‹ï¼Œä½¿ç”¨ä»¥ä¸‹è·¯å¾„ï¼š

1. `custom template file` â€“ The [page template](https://developer.wordpress.org/themes/template-files-section/page-template-files/) assigned to the page. See `get_page_templates()`.

   custom template file - åˆ†é…ç»™é¡µé¢çš„é¡µé¢æ¨¡æ¿ã€‚è¯·å‚é˜… get_page_templates()ã€‚

2. `page-{slug}.php` â€“ If the page slug is `recent-news`, WordPress will look to use `page-recent-news.php`.

   page-{slug}.php - å¦‚æžœé¡µé¢çš„æ ‡é¢˜æ˜¯ recent-newsï¼ŒWordPress å°†ä½¿ç”¨ page-recent-news.phpã€‚

3. `page-{id}.php` â€“ If the page ID is 6, WordPress will look to use `page-6.php`.

   page-{id}.php - å¦‚æžœé¡µé¢ ID æ˜¯ 6ï¼ŒWordPress å°†ä½¿ç”¨ page-6.phpã€‚

4. `page.php`

5. `singular.php`

6. `index.php`



### [Category](https://developer.wordpress.org/themes/basics/template-hierarchy/#category)

Rendering category archive index pages uses the following path in WordPress:

åœ¨ WordPress ä¸­ï¼Œæ¸²æŸ“åˆ†ç±»æ¡£æ¡ˆç´¢å¼•é¡µé¢ä½¿ç”¨ä»¥ä¸‹è·¯å¾„ï¼š

1. `category-{slug}.php` â€“ If the categoryâ€™s slug is `news`, WordPress will look for `category-news.php`.
2. `category-{id}.php` â€“ If the categoryâ€™s ID is `6`, WordPress will look for `category-6.php`.
3. `category.php`
4. `archive.php`
5. `index.php`



### [Tag](https://developer.wordpress.org/themes/basics/template-hierarchy/#tag)

To display a tag archive index page, WordPress uses the following path:

1. `tag-{slug}.php` â€“ If the tagâ€™s slug is `sometag`, WordPress will look for `tag-sometag.php`.
2. `tag-{id}.php` â€“ If the tagâ€™s ID is `6`, WordPress will look for `tag-6.php`.
3. `tag.php`
4. `archive.php`
5. `index.php`



### [Custom Taxonomies](https://developer.wordpress.org/themes/basics/template-hierarchy/#custom-taxonomies)

[Custom taxonomies](https://developer.wordpress.org/themes/basics/categories-tags-custom-taxonomies/) use a slightly different template file path:

è‡ªå®šä¹‰åˆ†ç±»ä½¿ç”¨çš„æ¨¡æ¿æ–‡ä»¶è·¯å¾„ç•¥æœ‰ä¸åŒï¼š

1. `taxonomy-{taxonomy}-{term}.php` â€“ If the taxonomy is `sometax`, and taxonomyâ€™s term is `someterm`, WordPress will look for `taxonomy-sometax-someterm.php.` In the case of [post formats](https://developer.wordpress.org/themes/functionality/post-formats/), the taxonomy is â€˜post_formatâ€™ and the terms are â€˜post-format-{format}. i.e. `taxonomy-post_format-post-format-link.php` for the link post format.

   taxonomy-{taxonomy}-{term}.php - å¦‚æžœtaxonomyæ˜¯ "sometax"ï¼Œtaxonomy's termæ˜¯ "someterm"ï¼ŒWordPress å°†æŸ¥æ‰¾ taxonomy-sometax-someterm.phpã€‚åœ¨post formatsçš„æƒ…å†µä¸‹ï¼Œtaxonomyæ˜¯ "post_format"ï¼Œtaxonomyçš„termæ˜¯ "post-format-{format}"ã€‚ä¾‹å¦‚ï¼Œtaxonomy-post_format-post-format-link.php ç”¨äºŽé“¾æŽ¥å¸–å­æ ¼å¼ã€‚

2. `taxonomy-{taxonomy}.php` â€“ If the taxonomy were `sometax`, WordPress would look for `taxonomy-sometax.php`.

   taxonomy-{taxonomy}.php - å¦‚æžœtaxonomy æ˜¯sometaxï¼ŒWordPress ä¼šæŸ¥æ‰¾ taxonomy-sometax.phpã€‚

3. `taxonomy.php`

4. `archive.php`

5. `index.php`



### [Custom Post Types](https://developer.wordpress.org/themes/basics/template-hierarchy/#custom-post-types)

[Custom Post Types](https://developer.wordpress.org/themes/basics/post-types/) use the following path to render the appropriate archive index page.

è‡ªå®šä¹‰å¸–å­ç±»åž‹ä½¿ç”¨ä»¥ä¸‹è·¯å¾„å‘ˆçŽ°ç›¸åº”çš„å­˜æ¡£ç´¢å¼•é¡µé¢ã€‚

1. `archive-{post_type}.php` â€“ If the post type is `product`, WordPress will look for `archive-product.php`.
2. `archive.php`
3. `index.php`

(For rendering a single post type template, refer to the [single post display](https://developer.wordpress.org/themes/basics/template-hierarchy/#single-post) section above.)



### [Author display](https://developer.wordpress.org/themes/basics/template-hierarchy/#author-display)

Based on the above examples, rendering author archive index pages is fairly explanatory:

1. `author-{nicename}.php` â€“ If the authorâ€™s nice name is `matt`, WordPress will look for `author-matt.php`.
2. `author-{id}.php` â€“ If the authorâ€™s ID were `6`, WordPress will look for `author-6.php`.
3. `author.php`
4. `archive.php`
5. `index.php`



### [Date](https://developer.wordpress.org/themes/basics/template-hierarchy/#date)

Date-based archive index pages are rendered as you would expect:

1. `date.php`
2. `archive.php`
3. `index.php`

[Top â†‘](https://developer.wordpress.org/themes/basics/template-hierarchy/#top)

### [Search Result](https://developer.wordpress.org/themes/basics/template-hierarchy/#search-result)

Search results follow the same pattern as other template types:

æœç´¢ç»“æžœéµå¾ªä¸Žå…¶ä»–æ¨¡æ¿ç±»åž‹ç›¸åŒçš„æ¨¡å¼ï¼š

1. `search.php`
2. `index.php`



### [404 (Not Found)](https://developer.wordpress.org/themes/basics/template-hierarchy/#404-not-found)

Likewise, 404 template files are called in this order:

1. `404.php`
2. `index.php`



### [Attachment](https://developer.wordpress.org/themes/basics/template-hierarchy/#attachment)

Rendering an attachment page (attachment post-type) uses the following path:

æ¸²æŸ“é™„ä»¶é¡µé¢ï¼ˆé™„ä»¶å¸–å­ç±»åž‹ï¼‰ä½¿ç”¨ä»¥ä¸‹è·¯å¾„ï¼š

1. {MIME-type}.php â€“ can be any MIME type (For example: image.php, video.php, pdf.php). For text/plain, the following path is used (in order):

   {MIME-type}.php - å¯ä»¥æ˜¯ä»»ä½• MIME ç±»åž‹ï¼ˆä¾‹å¦‚ï¼šimage.phpã€video.phpã€pdf.phpï¼‰ã€‚å¯¹äºŽ text/plainï¼Œä½¿ç”¨ä»¥ä¸‹è·¯å¾„ï¼ˆæŒ‰é¡ºåºï¼‰ï¼š

   text-plain.php
   plain.php
   text.php

2. attachment.phpã€

3. single-attachment-{slug}.php â€“ For example, if the attachment slug is holiday, WordPress would look for single-attachment-holiday.php.

4. single-attachment.php

5. single.php

6. singular.php

7. index.php



### [Embeds](https://developer.wordpress.org/themes/basics/template-hierarchy/#embeds)

The embed template file is used to render a post which is being embedded. Since 4.5, WordPress uses the following path:

åµŒå…¥æ¨¡æ¿æ–‡ä»¶ç”¨äºŽå‘ˆçŽ°è¢«åµŒå…¥çš„å¸–å­ã€‚è‡ª 4.5 ç‰ˆèµ·ï¼ŒWordPress ä½¿ç”¨ä»¥ä¸‹è·¯å¾„ï¼š

1. `embed-{post-type}-{post_format}.php` â€“ First, WordPress looks for a template for the specific post. For example, if its post type is `post` and it has the audio format, WordPress would look for `embed-post-audio.php`.
2. `embed-{post-type}.php` â€“ If the post type is `product`, WordPress would look for `embed-product.php`.
3. `embed.php` â€“ WordPress then falls back to embed`.php`.
4. Finally, WordPress ultimately falls back to its own `wp-includes/theme-compat/embed.php` template.



## [Non-ASCII Character Handling](https://developer.wordpress.org/themes/basics/template-hierarchy/#non-ascii-character-handling)

Since WordPress 4.7, any dynamic part of a template name which includes non-ASCII characters in its name actually supports both the un-encoded and the encoded form, in that order. You can choose which to use.

è‡ª WordPress 4.7 èµ·ï¼Œæ¨¡æ¿åç§°ä¸­åŒ…å«éž ASCII å­—ç¬¦çš„ä»»ä½•åŠ¨æ€éƒ¨åˆ†å®žé™…ä¸Šéƒ½æ”¯æŒæœªç¼–ç å’Œç¼–ç ä¸¤ç§å½¢å¼ï¼Œå¹¶æŒ‰é¡ºåºæŽ’åˆ—ã€‚æ‚¨å¯ä»¥é€‰æ‹©ä½¿ç”¨å“ªä¸€ç§ã€‚

Hereâ€™s the page template hierarchy for a page named â€œHello World ![ðŸ˜€](https://s.w.org/images/core/emoji/14.0.0/svg/1f600.svg)â€ with an ID of `6`:

ä¸‹é¢æ˜¯ä¸€ä¸ªåä¸º "Hello World"ã€ID ä¸º 6 çš„é¡µé¢çš„æ¨¡æ¿å±‚æ¬¡ç»“æž„ï¼š

- `page-hello-world-![ðŸ˜€](https://s.w.org/images/core/emoji/14.0.0/svg/1f600.svg).php`
- `page-hello-world-%f0%9f%98%80.php`
- `page-6.php`
- `page.php`
- `singular.php`

The same behaviour applies to post slugs, term names, and author nicenames.



## [Filter Hierarchy](https://developer.wordpress.org/themes/basics/template-hierarchy/#filter-hierarchy)

The WordPress template system lets you filter the hierarchy. This means that you can insert and change things at specific points of the hierarchy. The filter (located in the [`get_query_template()`](https://developer.wordpress.org/reference/functions/get_query_template/) function) uses this filter name: `"{$type}_template"` where `$type` is the template type.

WordPress æ¨¡æ¿ç³»ç»Ÿå…è®¸æ‚¨è¿‡æ»¤å±‚æ¬¡ç»“æž„ã€‚è¿™æ„å‘³ç€æ‚¨å¯ä»¥åœ¨å±‚æ¬¡ç»“æž„çš„ç‰¹å®šç‚¹æ’å…¥å’Œæ›´æ”¹å†…å®¹ã€‚è¿‡æ»¤å™¨ï¼ˆä½äºŽ get_query_template()å‡½æ•°ä¸­ï¼‰ä½¿ç”¨ä»¥ä¸‹è¿‡æ»¤å™¨åç§°ï¼š"{$type}_template"ï¼Œå…¶ä¸­ $type æ˜¯æ¨¡æ¿ç±»åž‹ã€‚

Here is a list of all available filters in the template hierarchy:

ä»¥ä¸‹æ˜¯åœ¨æ¨¡æ¿å±‚æ¬¡ç»“æž„ä¸­å¯ç”¨çš„filtersåˆ—è¡¨ï¼š

- `embed_template`
- `404_template`
- `search_template`
- `frontpage_template`
- `home_template`
- `privacypolicy_template`
- `taxonomy_template`
- `attachment_template`
- `single_template`
- `page_template`
- `singular_template`
- `category_template`
- `tag_template`
- `author_template`
- `date_template`
- `archive_template`
- `index_template`



### [Example](https://developer.wordpress.org/themes/basics/template-hierarchy/#example)

For example, letâ€™s take the default author hierarchy:

- `author-{nicename}.php`
- `author-{id}.php`
- `author.php`

To add `author-{role}.php` before `author.php`, we can manipulate the actual hierarchy using the â€˜author_templateâ€™ template type. This allows a request for /author/username where username has the role of editor to display using author-editor.php if present in the current themes directory.

è¦åœ¨ author.php ä¹‹å‰æ·»åŠ  author-{role}.phpï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ "author_template "æ¨¡æ¿ç±»åž‹æ¥æ“ä½œå®žé™…çš„å±‚æ¬¡ç»“æž„ã€‚å¦‚æžœå½“å‰ä¸»é¢˜ç›®å½•ä¸­å­˜åœ¨ author-editor.phpï¼Œåˆ™å¯ä»¥ä½¿ç”¨ author-editor.php æ˜¾ç¤º/author/usernameï¼ˆå…¶ä¸­ç”¨æˆ·åå…·æœ‰ç¼–è¾‘å™¨è§’è‰²ï¼‰è¯·æ±‚ã€‚

```php
function author_role_template( $templates = '' ) {
	$author = get_queried_object();
	$role   = $author->roles[0];

	if ( ! is_array( $templates ) && ! empty( $templates ) ) {
		$templates = locate_template( array( "author-$role.php", $templates ), false );
	} elseif ( empty( $templates ) ) {
		$templates = locate_template( "author-$role.php", false );
	} else {
		$new_template = locate_template( array( "author-$role.php" ) );

		if ( ! empty( $new_template ) ) {
			array_unshift( $templates, $new_template );
		}
	}
	return $templates;
}
add_filter( 'author_template', 'author_role_template' );
```

Changelog:

- **Updated** 2022-02-15. Added a notice explaining that the template hierarchy is the same for classic and block themes, but that the examples uses .php files and block themes use .html files.
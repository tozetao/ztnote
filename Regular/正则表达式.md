## 正则表达式 ##

正则表达式一般由定位符、元字符、匹配符组成，类似于一个字符串模板，通过这个模板来匹配字符。


### 定界符 ###
定义正则表达式的开始和结束，一般是/斜杠，也可以是#字符。

```php
$regex = '/abc/i';	//匹配abc字符串的表达式
$regex = '/http:\/\/[\w.]+/';	//匹配一个域名
```


### 修饰符 ###
用于改变正则表达式的行为，修饰符有i、x等。
i表示忽略字母大小写，x表示忽略空格
```php
$regex = '/HELLO/';
$str = 'hello world';
// 无修饰符
if(preg_match($regex, $str, $matches)){
}

// 有修饰符
if(preg_match($regex . 'i', $str, $matches)){
}
```

### 元字符 ###
元字符，用于限定字符个数。
- *，用于匹配0到多个字符。
- +，匹配1到多个字符。
- ?，匹配0到1个字符。
- {n}，匹配n个字符
- {n,}，匹配n到多个字符
- {n,m}，匹配n到m个字符

在贪婪模式中，会尽可能的匹配多的字符。
```php
$regex = 'a{3,}';
$content = 'aaaaabcdef';
preg_match($regex, $content, $arr);
var_dump($arr);		//输出aaaaa
```

> ? 元字符

```php
$regex = '/a/i';
$content = 'abcda123a';
preg_match($regex, $content, $matches);
print_r($matches);		//输出a

$regex = '/a?/i';
$content = 'dabcda123a';
preg_match($regex, $content, $matches);
print_r($matches);		//输出空字符串
```
?元字符的匹配是惰性匹配，我自己测试的，不知道应不应这样叫，总之?元字符在匹配的时候，如果第一个字符不匹配，那么就是返回空字符串。

### 匹配符 ###
匹配符用于匹配某一类的字符。
- \d，匹配一个数字字符。[0-9]
- \D，匹配一个非数字字符。[^0-9]
- \w，匹配0-9、a-z、A-Z任意中的一个字符，相当于[0-9a-zA-Z]
- \W，匹配一个非单词字符，相当于[^0-9a-zA-Z]
- \s，匹配空白字符，例如空格、换行符、制表符中任意一个
- \S，匹配一个非空表字符
- .，匹配任意一个非\n换行的字符。


### 字符域 ###
在正则表达式中[]代表着字符类，或者叫做字符域，允许你定义要匹配的某一类字符。
```php
$regex = '/[abcd]/i';	//匹配abcd中的任意一个字符
$content = 'auiobwerd';
preg_match($regex, $content, $matches);
print_r($matches);		//输出a、b、d

$content = 'aababccdacdb';
preg_match($regex, $content, $matches);
print_r($matches);		//输出aababccdacdb

$regex = '/[abcd]+/i';	//匹配a、b、c、d中的一个或多个字符
$content = 'aab1abc2cdac3db';
preg_match_all($regex, $content, $matches);
print_r($matches);		//输出

$regex = '/[a-z]/i';	//匹配a-z中的一个字符
$regex = '[^a-z]/i';	//匹配非a-z中的一个字符
```
注：在字符域中， "."只是普通的符号，并不会起元字符作用。

>^上档键

用于在字符域中取反，例如：[^abc]表示匹配出abc意外的任意一个字符。


### 转义 ###
有的时候需要匹配元字符，这个时候需要对其进行转义。

```php
//例如要匹配$，正则表达式是\$，而表达式中的\也需要转义，所以就变成了\\，最后的表达式是\\$。
//在测试的时候发现除了反斜杠的匹配，其他元字符的匹配，只需要加一个反斜杠转义即可，并不需要加多一个反斜杠
$content = 'abcd$efg';
$regex = '/\\$/i';		//匹配一个$字符
$regex = '/\\\/i';		//匹配一个\反斜杠

```
>更好的解决方案是使用\Q\E来匹配元字符。

### 定位符 ###
限定表达式所匹配字符的起始和结束位置，分别是^和$字符。
- ^，指定输入字符的起始位置
- $，指定输入字符的结束位置
- \b，匹配一个单词边界，字符串的起始、结束和空格称之为单词边界。

```php
$content = 'abcdheeeeeel';
$regex = '/h\w+l$/i';		//匹配h
preg_match($regex, $content, $matches);
print_r($matches);

$regex = '/^h\w+l&/i';		//匹配h开头的字符串，可以看到这个表达式输出null
preg_match($regex, $content, $matches);
print_r($matches);

$regex = '/^\b\d+$/i';		//以字符串的开始或空格作为表达式起始来匹配
$content = 'abcdf 12345';
preg_match($regex, $content, $matches);
print_r($matches);			//输出12345 
```

### 分支条件 ###
正则表达式指的是有几种规则，如果满足其中一种规则都应该当成匹配。具体是用过|将不同规则分开。
分支条件会从左到右测试每个条件，如果其中一个满足条件了，其余的规则就不会匹配了。
```php
$regex = '/0\d{2}-\d{8}|0\d{3}-\d{7}/i';	
//匹配3位区号，8位本地号或匹配4为区号，7为本地号
$n1 = '022-23423423';

preg_match($regex, $n1, $matches);
print_r($matches);
``` 


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
<title>网页标题</title>
<meta name="keywords" content="关键字列表" />
<meta name="description" content="网页描述" />
<link rel="stylesheet" type="text/css" href="" />
<style type="text/css"></style>
<!-- 
一、正则简介
	正则表达式(regular expression)描述了一种字符串匹配的模式，可以用来检查一个串是否含有某种子串、将匹配的子串做替换或者从某个串中取出复合某个条件的子串等。

	正则表达式是一种独立的语言，可以运行在如php、java等编程语言中。

	数据库：SQL语言
	XML：Xpath
	正则：数据的检索

	example ：
		数据库的查询，
		select * from user where name='xxx';//这种是精准匹配
		select * from user where name='%xx%';//这种是模糊匹配
		模式：在js中，把要查询的条件称之为一种匹配模式。
		某种：由于模糊查询，那么匹配得到的结果是多样的。

二、正则对象
	1. 正则对象的创建
		a. 隐式创建
			正则：var reg=/表达式/模式;

		b. 显示创建
			正则：var reg=new RegExp(正则表达式，模式);
	
		区别：
			使用第二种的话，由于正则表达式是写在字符串中的，必须对字符串进行转义，使用起来比较麻烦，建议使用第一种。
		example：
			var reg=/\d/gi;		//查找一个字符串是否含有数字
			var reg=new RegExp('\d','gi');
			var str='asd123456sdfd';
			alert(reg.test(str));
	
	2. 模式
		有三种模式。
		g：global，全局匹配。遍历字符串，把所有满足表达式结果的都匹配出来。
		i：ignore，在正则表达式中，表示忽略大小写。
		
	3. 转义字符
		所有的ASCII码都可以用'\'加数字来表示，
		在C语言中，定义了'\'+字母来表示那些不能显示的ASCII字符，如\t(制表符) \n(换行) ，这种字符串就称为转义字符串，这个转义字符并非是原本的ASCII字符，而是用于表示特殊字符的意思。

		alert('\n');//输出换行  \转义，表示n用于换行
		alert('\\n');//输出\n，可以认为不要转义
		在字符串中，对于\后的字符，程序是把其当作转义字符来看待的。

三、使用方式
	1. RegExp类
		test(str)：判断字符串中是否有指定模式匹配的字符或字符串，返回Boolbean。
		exec(str)： 返回指定模式的字符串。

	2. String 类
		search	  ： 返回指定模式的字符串所在位置，单匹配。
		match	  ： 返回指定模式的字符串，返回数组，多匹配。
		replace	  ： 返回指定模式替换后的字符串
		split		  ： 返回指定模式分割后的字符串，返回数组


		}

一、正则表达式
	概念：
		普通字符(a-z)、特殊字符(元字符)组成正则表达式，可以理解成一个字符串模版，通过这个字符串模版来匹配字符。
	
	查多少：一般是匹配具体数目的字符，或者匹配某个区间的字符。
	从哪里查：定位符控制查找的范围。

	1. 限定符
		元字符的一种。
		指定表达式的一个给定字符必须要出现多少次磁能满足匹配，也就是要查多少个。
		*：匹配0到多
		+：匹配1到多
		?：匹配0或1

		{n}：匹配n次
		{n,}：最少匹配n次，		也就是匹配n到多个字符。
		{n,m}：最少匹配n次，最多匹配m次，	也就是匹配n-m个字符。
		
		*、+、?可以用{}来表示或代替
			*：{0,}
			+：{1,}
			?：{0,1}
		注：
			在贪婪模式中，最少匹配N次，即表示该字符一定要至少出现N次才会被匹配。
			匹配0次，表示没有该字符，也就是null
			匹配0到多次，表示只有有该字符，就会被匹配。

		example：
			var reg=/f*/g;	//匹配0-多个f字符
			var reg=/z*/gi;		//匹配0-多个z字符。
			
			var reg=/z?/gi;
	
	2. 字符匹配符
		字符匹配符用于匹配某个或某些字符。
		
		[]:在正则表达式称之为字符簇（只匹配一个字符），取其一的意思。
		^ : 上档键，在正则中表示取反（仅限于字符簇）
		example：
			[a-z]	：匹配a-z中的任一字符
			[A-Z] ：匹配A-Z中的任一字符
			[0-9] ：匹配数字0-数字9中的任一数字（\d）
			[0-9a-z] : 匹配数字0-数字9或a-z中任一字符
			[0-9a-zA-Z] : 匹配数字0-数字9或a-z或A-Z中的任一字符
			[abcd] ：匹配字符a或字符b或字符c或字符d
			[1234] ：匹配数字1或数字2或数字3或数字4、

			[^a-z] ：匹配除a-z中的任一字符
			[^0-9] ：匹配除0-9中的任一字符
			[^abcd] ：匹配除字符a或字符b或字符c或字符d以外的任一字符
		
		\d ：匹配一个数字字符。[0-9]
		\D ：匹配一个非数字字符。[^0-9]
		\w ：匹配包括下划线的任何单词字符。[0-9a-zA-z_]
		\W ：匹配任何非单词字符。[^0-9a-zA-Z_]
		\s ：匹配任何空白字符 空格 换行 制表位
		\S ：匹配任何非空白字符。 
		.  ：匹配除 "\n" 之外的任何单个字符
	
	3. 定位符
		定位符可以将一个正则表达式固定在字符串的开始和结束。也可以创建只在单词内或只在单词的开始或结尾处出现的正则表达式。
		
		RegExpOjbect.lastIndex：该属性存放一个整数，它声明的是上一次匹配文本之后的第一个字符的位置。
		
		PS：在没有加限定符的时候，正则表达式是匹配整个字符串的，只要有满足模式的，就返回true。

		^：匹配输入字符串的开始位置。
		$：匹配输入字符串的结束为止。
		\b：匹配一个单词边界，开始、空格、结尾称为单词边界。

		example:
			var reg=/^xxxx$/gi'
			表示以x开始，以x结束。
		
		
			example ：
				var reg=/\ban/gi;
				//表示在字符开始的边界或字符中以空格开始的边界开始匹配。
				var reg=/an\b/gi;
				//表示在字符串结尾的边界开始来匹配。
				var reg=//\ban\b/gi;
				//表示在字符串以单词边界开始、单词边界结尾来匹配。
			
				var str="anhmyello,my an name is zhangsan";
				var reg=/\ban\b/gi;
				var result;

				while(result=reg.exec(str)){
					document.write(result);
					document.write('<hr>'+reg.lastIndex);
				}

		\B：匹配非单词边界，即不是以开始、空格、结尾的单词边界的匹配。
			var reg=/an\B/gi;
			//表示不是以空格、结尾的单词边界的匹配
			var reg=/\Ban\B/gi;
			//表示以非单词边界开始，非单词边界结尾的字符串。
			
			var str="anhmyello,my an name is zhangsan";
			alert(str.length);
			var reg=/an\B/gi;
			var result;

			while(result=reg.exec(str)){
				document.write(result+'<hr>');
				document.write(reg.lastIndex+'<hr>');
			}
	6. 转义符
		\可以定义一个转义符
		/	.	()	{}	'  "  []  *  ?  +  ^  $  -
		凡是正则表达式的特殊符号在匹配的时候都需要进行转义。
	7. 选择匹配符
		在正则表达式可以使用|(或的意思)代表匹配符。
		example：
			//需求：匹配出hellozhangsan或helloyuxuan
			var str="hellozhangsan,helloyuxuan";
			//第一种解决方案，|是或的意思，即满足模式就返回值。
			//var reg=/hellozhangsan|helloyuxuan/gi;
			//第二种解决方案
			var reg=/hello(zhangsan|yuxuan)/gi;
			//任何表达式都存在优先级这个概念，碰到括号的，在所有语言中，它的优先级是最高的，在优先级最高下面，我可以选择zhangsan或yuxuan，然后连接hello，再来匹配。
			var result=str.match(reg);
			for(var i=0;i<result.length;i++){
				document.write(result[i]+"<hr>");
			}


			var reg=/hello(zhangsan|yuxuan)/gi;
			//先运行子表达式，发现有|符号，把匹配到的字符存储起来。
			//再运行整个表达式，如果有满足匹配内容的，那么会把子表达式匹配内容追加到整个表达式内容之后作为一个数组返回。
			PS：这是使用exec方法会做的事情。

			var result;
			while(result=reg.exec(str)){
				document.write(result+'<hr>');
				document.write(reg.lastIndex+'<hr>');
			}
			使用exec的话，子表达式也会被捕获，追加到原表达式以一个数组返回，之后继续遍历匹配。
			match不会去返回子表示的内容。

	8. 特殊用法
		a. 预查
			就是预先查询的意思。
			(?=) ：正向预查，
					子表达式配合正则匹配，返回的结果不包括子表达式的匹配内容。
			(?!) ： 反向预查

			(?:)：子表达式只配合正则匹配，但不捕获子表达式，返回的结果包括子表达式。

			先把结果查询出来，在匹配的时候，根据匹配的结果查询相应的数据，
			/*
			example：
				var str="王小丫屌丝，王小丫好人";
				var reg=/王小丫(?=屌丝)/gi;	//查询王小丫后面=屌丝的结果。
				var reg=/王小丫(?!屌丝)/gi; //匹配不等于屌丝后面的内容。
				var result;
				while(result=reg.exec(str)){
					document.write(result+'<hr>');
					document.write(reg.lastIndex+'<hr>');
				}
				*/

				var str="hellozhangsan,helloyuxuan";

				var reg=/hello(?:zhangsan|yuxuan)/gi;

				var result;
				while(result=reg.exec(str)){
					document.write(result+"、长度："+result.length+'<hr>');
					document.write(reg.lastIndex+'<hr>');
				}
四、子表达式
	1. 子表达式
		在正则表达式中，通过一对小括号()括起来的表达式，我们称为子表达式。
		\d(\d)\d
	2. 捕获
		在js中，当通过子表达式匹配到的内容，系统会自动将其存储缓存区中，我们把这个过程叫做捕获。

	3. 反向引用(后向引用)
		在正则表达式中，我们可以通过\n，取出缓存区中的存储数据。
		n是一个数字，如\1，表示第一个匹配到的子表达式的内容。
	
		example ：
			var str=abc1234fsdfds;
			var reg=/abc\d(\d)(\d)/gi;	
			//括号括起来的就是子表达式，会被存储到缓存区中。
			str.match(reg);
			//这里原正则表达式会匹配到abc123，同时字符2和字符3会被子表达式匹配到，捕获到的字符会分别被存储到缓存区中。

			//每匹配到一个子表达式，都会存储到缓存区中。
			
		example ：匹配php前后有三个同样的数字字符，可以采用子表达式的方式
			var str='f123php123fdsfdsf1456php789fdsf';

			//解析下，这里匹配到的子表达式会被存储到缓存区中，由于是第一个匹配到的子表达式，所以用\1来引用它。
			//所以这个表达式可以认为是这样匹配的，\d\d\dphp\d\d\d。
			var reg=/(\d\d\d)php\1/gi;

			var arr=str.match(reg);
			for(var i=0;i<arr.length;i++){
				alert(arr[i]);
			}
			
		example ：匹配\d\d\dphp\d\d\d模式的字符
			var str='fsdfsdf123php654fdsfdsf987456php258fdsf';
			var reg=/(\d)\d\dphp\d\d\d/gi;
			var arr=str.match(reg);

			for(var i=0;i<arr.length;i++){
				alert(arr[i]);
			}

五、exec与子表达式
	1. exec的使用
		example 1：
		通过while循环，一直去使用exec方法匹配字符串。
			var str="anhmyello,my name is zhangsan";
			var reg=/\w/gi;	//一定要是g模式，否则只会匹配首个复合模式的字符串，则会陷入死循环。
			var result;
			while(result=reg.exec(str)){
				document.write(result);
			}

		example 2：
			var str='abc123fdsf234fdf343';
		//如果不加g，那么只会匹配一次。
		//所以在使用exec方法时，需要使用g模式。

		/*
			如果表达式有子表达式，exec执行后会返回1个数组。
			1. 先匹配到的整个表达式，添加到数组中，再依次匹配子表达式，每匹配到的子表达式则追加到数组中。
			2. 如果是g模式，会遍历字符串，继续匹配原表达式，当匹配到原表达式，执行上述过程。
		*/
		var reg=/(\d)(\d\d)/gi;
		var result;

		while(result=reg.exec(str)){
			document.write(result+'<hr>');
		}



四、结巴程序
		需求：
			我...我是是..一个个...帅帅帅帅...哥!;
			变成：我是一个帅哥！
		思路：
	
	
		
	4. 中文字符如何匹配
		example 1：
		var str="fdsfsd中国fdsfsd广州";
		var reg=/中国/g;
		var result=str.match(reg);
		for(var i=0;i<result.length;i++){
			document.write(result[i]+"<hr>");
		}
		数据字典
			把常用的词存储在文件中，通过遍历筛选的方式进行查询。
			txt文件。

-->

<script type="text/javascript">
var str="我...我是是..一个个...帅帅帅帅...哥!";

var reg=/\.+/gi;
str=str.replace(reg,"");//替换掉.号

reg=/(.)\1*/gi;//*表示匹配0个或多个字符，若只有一个字符，由于最少匹配0次，即表示null，那么一个字符也会被匹配到。
//+的话，那么表示最少俩个字符了，所以一个字符不会被匹配到。

//replace：第二个参数可以引用缓存区的内容，引用方式$n（n代表数字1到n，即区域名）
str=str.replace(reg,'$1');//把匹配到的内容用缓存区的字符来替换掉。
document.write(str);
/*
var result;
while(result=reg.exec(str)){
	document.write("匹配结果："+result+"，长度："+result.length+'<hr>');
	document.write(reg.lastIndex+'<hr>');
}

/*
var str="王小丫屌丝，王小丫好人";
var reg=/王小丫(?=屌丝)/gi;	//查询王小丫后面=屌丝的结果。
var reg=/王小丫(?!屌丝)/gi; //匹配不等于屌丝后面的内容。
var result;
while(result=reg.exec(str)){
	document.write(result+'<hr>');
	document.write(reg.lastIndex+'<hr>');
}


var str="hellozhangsan,helloyuxuan";

var reg=/hello(?:zhangsan|yuxuan)/gi;

var result;
while(result=reg.exec(str)){
	document.write(result+"、长度："+result.length+'<hr>');
	document.write(reg.lastIndex+'<hr>');
}
/*
var result=str.match(reg);
for(var i=0;i<result.length;i++){
	document.write(result[i]+"<hr>");
}

/*
//RegExp.lastIndex：判断匹配到的位置。
for(var i=0;i<result.length;i++){
	document.write(result[i]+"<hr>");
}
/*
var tel='fsdf135700250744bcd';
var reg=/^1[3578]\d{9}$/gi;
alert(reg.test(tel));
/*
var str="fdsfsd中国fdsfsd广州";
var reg=/f{0}/g;	
//*：匹配0次：即表示没有该字符也会被匹配到，也就是空，会返回null。z*即表示匹配0到多个z字符。
var result=str.match(reg);
alert(result);
/*
for(var i=0;i<result.length;i++){
	document.write(result[i]+"<hr>");
}
*/
//var reg=/[a-zA-Z]{1}[0-9a-zA-Z_]{1,}/gi;//匹配首字符是字母，后面跟0-9加字符加_最少一个。
/*
\D：匹配非数字字符，[^0-9]
\d：匹配数字字符，[0-9]
*/
/*
var str="sdDFSfsdf";
var reg=/[abcd]/gi;//只匹配abcd中的任意一个字符，由于是i模式，所以忽略大小写，大写的也会被匹配到。

var str="hello\nfdsf jkjk	fsdf23";
var reg=/\W/gi;
var result=str.match(reg);
alert(result.length);
for(var i=0;i<result.length;i++){
	alert(result[i]);
}
/*
	var str='asdfasdfasd<div>hello</div>fasdfsadf<span>php</span>asdfaslkjl';
	var reg=/>?\w*<?/gi;

	alert(str.match(reg));
*/
/*
	//var reg=/\d/gi;		//查找一个字符串是否含有数字
	var reg=new RegExp('\d','gi');
	var str='asd123456sdfd';
//	alert(reg.test(str));
*/

/*
function $(id){
	return document.getElementById(id);
}
window.onload=function(){
	$('btn1').onclick=function(){
		var str=$('content').value;
		var reg=/\d/gi;	//判断是否有数字
		alert(reg.test(str));
	}
	$('btn2').onclick=function(){
		var str=$('content').value;
		var reg=/\d/gi;	
		alert(reg.exec(str));
	}
	$('btn3').onclick=function(){
		var str=$('content').value;
		var reg=/\d/gi;	
		alert(str.search(reg));
	}
	$('btn4').onclick=function(){
		var str=$('content').value;
		var reg=/\d/gi;	
		alert(str.match(reg));
	}
	$('btn5').onclick=function(){
		var str=$('content').value;
		var reg=/\d/gi;	
		alert(str.replace(reg,'yuxuan'));
	}
	$('btn6').onclick=function(){
		var str=$('content').value;
		var reg=/\d/gi;	
		alert(str.split(reg));
	}
}

<input type="text" id="content" value="" size='50'/>
<hr>
<input type="button" id="btn1" value="test"/>
<input type="button" id="btn2" value="exec"/>
<input type="button" id="btn3" value="search"/>
<input type="button" id="btn4" value="match"/>
<input type="button" id="btn5" value="replace"/>
<input type="button" id="btn6" value="split"/>
*/

</script>
</head>
<body>

</body>
</html>

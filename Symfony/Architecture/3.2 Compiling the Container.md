The service container can be compiled for various reasons. These reasons include checking for any potential issues such as circular references and making the container more efficient by resolving parameters and removing unused services. Also, certain features - like using [parent services](https://symfony.com/doc/5.4/service_container/parent_services.html) - require the container to be compiled.

服务容器可以出于各种原因被编译。这些原因包括检查任何潜在的问题，如循环引用，以及通过解析参数和删除未使用的服务使容器更有效率。另外，某些功能--比如使用[父服务](https://symfony.com/doc/5.4/service_container/parent_services.html)--需要对容器进行编译。

It is compiled by running:

它是通过运行来编译的：

```php
$container->compile();
```

The compile method uses *Compiler Passes* for the compilation. The DependencyInjection component comes with several passes which are automatically registered for compilation. For example the [CheckDefinitionValidityPass](https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/DependencyInjection/Compiler/CheckDefinitionValidityPass.php) checks for various potential issues with the definitions that have been set in the container. After this and several other passes that check the container's validity, further compiler passes are used to optimize the configuration before it is cached. For example, private services and abstract services are removed and aliases are resolved.

编译方法使用*Compiler Passes*进行编译。DependencyInjection组件自带了几个passed，这些passed在编译时被自动注册。例如，[CheckDefinitionValidityPass](https://github.com/symfony/symfony/blob/5.4/src/Symfony/Component/DependencyInjection/Compiler/CheckDefinitionValidityPass.php)检查在容器中设置的定义的各种潜在问题。在这个和其他几个Passed检查容器有效性之后，进一步的Compiler Passes被用来在配置被缓存之前对其进行优化。例如，私有服务和抽象服务被删除，别名被解决。





### Managing Configuration with Extensions





https://symfony.com/doc/5.4/components/dependency_injection/compilation.html
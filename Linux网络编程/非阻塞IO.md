### 阻塞IO

当应用程序在阻塞IO模式下完成某个操作时，应用程序会被挂起，等待内核完成操作，提现在应用程序上就是卡住了。只有当内核完成具体操作后才会应用程序才会返回并继续执行。

所谓阻塞就是上一步动作没有完成，下一步动物将暂停，直到上一步动作完成后才能继续，以保持同步性。



### 非阻塞IO

在非阻塞IO模式下，当所请求的IO操作非得把本进程投入到睡眠中才能完成该操作时，不要让进程阻塞，而是直接返回一个错误，让应用程序继续执行。

阻塞IO与非阻塞IO都可以应用到各种IO的操作上，比如read、write等。



### read

当接收缓冲区为空时，阻塞模式调用会等待，而非阻塞模式则立刻返回-1，并有EWOULDBLOCK或EAGAIN错误；当接收缓冲区有数据时，这俩种模式都会将读到的数据返回，但是读取到的字节数可能是非预期的字节数。



### write

write和read不同，在阻塞模式下会等待发送缓冲区有足够容纳应用程序的输出字节时菜返回。而非阻塞模式下则是能够写入多少就写入多少，并返回实际写入的字节数。

阻塞模式下write有个特里，当对方主动关闭套接字时，这个时候write调用会立即返回并通过返回值告诉应用程序写入的字节数。如果再次对该套接字write操作就会返回失败，失败是通过返回值-1来告诉应用程序的。



### accept

在阻塞模式下，如果没有新的连接建立，accept会一直阻塞直到有新的连接进来；在非阻塞模式下如果没有新连接建立，accept调用会立即返回-1，并设置errno错误信息。



### connect

在阻塞模式下，connect调用只有在连接三次握手成功后才会返回。

而在非阻塞模式下调用会立刻返回以恶EINPROGRESS错误。TCP三次握手会正常进行，应用程序可以继续做其他初始化的事情。当该连接建立成功或失败时，可以通过IO多路复用select、poll等进行连接的状态检测。




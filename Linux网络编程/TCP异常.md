应用程序与TCP的可靠性





对于应用程来说，TCP不是可靠的。



从发送端来说，当调用write函数之后，数据流是存储在发送缓冲区的，如何发送、何时发送由网络协议栈决定。

当对应的数据发送给接收端，接收端回应ACK，存储在发送缓冲区的这部分数据就可以删除了。从协议设计上来看是可靠的，但是对于应用程序来说是不可靠的。

这里的不可靠指的是发送端无法获取ACK对应的数据流的情况，也就是说，发送端没有办法判断接收端应用程序是否已经接收到发送的数据流。如果需要知道这部分信息，就必须由应用程自己添加处理逻辑，比如显示的报文确认机制。



从接收端来说，也没有办法保证ACK过的数据可以被应用程序处理。因为数据需要接收端程序从接收缓冲区中拷贝。可能出现的情况是，已经ACK后的数据保存在接收缓冲区中，接收端处理程序就崩溃了。

这部分数据就没有办法被应用程序处理了。



TCP协议实现没有提供给上层应用程序过多的异常处理细节，我们只能通过读操作read、写操作write这俩种行为来感知异常情况。








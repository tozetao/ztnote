## sed

命令格式：sed -options sed脚本 输入文件
-options选项有：
- -n：不打印编辑行，默认sed打印出所有行，包括编辑行和未编辑行
- -i：将修改作用于文件
- -f：调用sed脚本文件，例如：sed -f script.sed input_file
- -e：添加sed脚本到程序的运行列表

sed脚本也就是sed编辑命令，通过它来定位文件。

### 文本定位
sed浏览文件时，默认从第一行开始，有俩种方式定位文本：
- 使用行号，可以是一个简单数字，或是一个行号范围
- 使用正则表达式

行号和正则表达式主要是配合sed编辑命令来编辑脚本，sed编辑命令有：
- p：打印匹配行
- =：显示文件行号
- d 删除定位行
- a\：在定位行号后附加新文本信息
- i\：在定位行号后插入新文本信息
- c\：用新文本替换定位文本
- s 使用替换模式替换相应模式



注：sed识别任何基本正则表达式和模式及其行匹配规则。如果要定位一特殊字符，必须使用 \ 屏蔽其特殊含义

example：
```
sed -n '1,3p' filename
# 匹配1-3行内容，并输出到标准输出中

sed -n '/[1-9]/' filename
# 使用正则表达式匹配

sed -n '3,/[1-9]/' filename
# 从文本第三行开始，使用正则表达式匹配

sed -n -e '/[1-9]/p' -e '/[1-9]/=' test.txt
# 执行俩个sed脚本命令

```

### 附加文本
要附加文本，使用符号a \，可以将指定文本一行或多行附加到指定行。如果不指定文本放置位置， sed缺省放在每一行后面。

附加文本时不能指定范围，只允许一个地址模式。文本附加操作时，结果输出在标准输出上。注意它不能被编辑，因为sed执行时，首先将文件的一行文本拷贝至缓冲区，在这里sed编辑命令执行所有操作（不是在初始文件上），因为文本直接输出到标准输出，sed并无拷贝。

要想在附加操作后编辑文本，必须保存文件，然后运行另一个sed命令编辑它。这时文件的内容又被移至缓冲区。

格式：
```
[address]a\
text\
text\
......
text

# 内容中的\是换行。
```

example：
```

#! /bin/sed -f
/[1-9]/ a\
happed.
# 将上述代码保存成sed脚本文件，执行

sed '/[1-9]/a\this is happed.' filename
# 在匹配的文本后另起一行附加字符串
```

### 插入文本
与附加命令一样，i\只接受一个地址，在匹配到行的文本前插入文本。
```
sed '/[1-9]i\insert/' filename
```

### 修改文本
c\是修改命令，会将匹配到的行替换成新文本
```
sed '1c\replace' filename
# 将第一行的文本替换成replace

#!/bin/sed -f
1 c\
The Dibble band were grooving.

/evening/ i\
They played some great tunes.

3 a\
Where was the nurse to help?
# 混合操作
```

### 替换文本
替换命令用替换模式替换指定内容，

格式：[address]  s/pattern-to-find/replacement-pattern/[gpwn]
-s告诉sed这是替换操作，并用pattern-to-find匹配内容，然后用replacement来替换。

参数选项：
- -g：全局替换，默认只替换第一次模式
- -p：缺省s e d将所有被替换行写入标准输出，加p选项将使- n选项无效。
- -n：选项不打印输出结果。
- -w：文件名使用此选项将输出定向到一个文件。




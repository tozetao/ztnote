### 捕鱼概率

捕鱼类的游戏实质是赌博游戏，通过抽水来赚钱。举个例子，玩家手里有10个金币，玩了一阵子之后，他手里只剩下8个金币，这2个金币就被商家拿走了，拿走的这部分就是抽水，抽水率 = 2 / 10 = 20%，抽水为2。



我们从最简单的思路分析，假设炮塔A每次攻击消耗10金币，A鱼打爆后固定掉落20金币。在不考虑抽水情况下，为了达到收支平衡，A炮塔击中A与的概率为：10 / 20 = 50%。

接下来考虑抽水的情况下，假设抽水率为5%，那么实际打鱼的金币为 9.5金币（10 * (1 - 0.05) ），这样实际的即中概率为47.5%（9.5 / 20）。

根据这个思路，每次攻击都是独立事件，相互之间不影响，可以计算出不同炮塔打不同鱼的击中概率。



概率公式为：

假设有X=金币消耗，Y=鱼产出金币，C=抽水率，概率 = X (1 - C)  / Y。





**实际游戏中玩家需要较为明显的赢钱与输钱的过程。**而目前这个思路在玩的过程中，玩家较难有这种体验，但在赌博游戏中这应该是必须的，玩家需要这样的刺激。因此我们**将游戏划分为不同的周期**，划分周期的依据可以是时间、攻击次数也可以是当前金币等。

假设按照攻击次数将游戏划分为四个周期（第一阶段：0 ~ 300、第二阶段：300 ~ 500、第三阶段：500 ~ 650、第四阶段：650 ~ 800），前三个周期都让玩家明显的感到赢，在最后让玩家一次性输掉，但总体的抽水依然满足5%抽水率这个设定。我们可以手动设定前三个周期的抽水（第一阶段：-0.5、第二阶段：-1、第三阶段：-2），因为要让玩家感觉到赢，也就是商家送钱给玩家，此时的抽水就为负值，然后计算出第四个阶段的抽水为7。

简单解释一下这个7是怎么来的。这里用了**加权平均值**的概念，设第四阶段的抽水为x，根据加权平均值的概念就有 （-0.5*300 + -1*200 + -2*150 + x*150）/ （300 + 200 + 150 + 150） = 10 * 5% ，可以计算出x为7。如果你对加权平均值不是很理解，可以百度一下相关的概念。

这里需要注意的是，第四阶段的抽水最大值不能超过10（这一点我不是很确定，但如果大于10的话，就没法计算概率了）。根据计算出的抽水，按照之前的思路算出相应的概率就可以了。在实际项目中不可能设计的这么死，肯定是会有变化的，至于项目要如何实现，可以多设计几组这样的周期来随机，或者还有其他什么方式来实现？

捕鱼游戏中还有一个重要的问题是**鱼群的问题**。我们假设两种最极端的情况，一种是全是小鱼（掉落金币最小），在这种情况下玩家会觉得没意思，因为击中的概率会比较高，但是又掉落不了多少金币；一种是大鱼（掉落的金币最大），此时玩家会非常受挫，因为击中的概率太低了。所以比较理想的状态就是什么鱼都有，但还是应该有一个比例的，这里也可以采用周期的概念来配置。这些都是细活，需要慢慢来调，就不说了。

由于我没有参与过捕鱼类游戏的设计，所以这个思路在实际中是否可行，还有待验证。希望你们在读过之后，可以指出其中存在的问题，非常感谢。



example：

假设有一个动物打中返还10000金币，炮值是100金币，假设抽水率为5%，那么打中的概率为多少呢？

100 * (1 - 5%) / 10000 = 0.0095。







### 其他参考

最基本的思路是：

收益 = 消耗 - 抽水 = 消耗 * （1 - 抽水比率）







### animal的概率设计

- 炮值与奖励

  首先炮值跟概率是没有关系的，炮值跟打中后得到的奖励有关系。

  假设你打的动物倍率是1000，使用的炮值是100，当你打爆动物的时候，奖励为1000 * 100.

- 鱼的爆率

  鱼的爆率与动物的倍率、返奖率有关。假设倍率为X，返奖率为C，它的爆率公式为：1 / X \* C。

动物世界的爆率计算排除了炮值和产出金币，它是预设好每个动物的概率，再将动物的概率乘以返奖率，相当于将打中的概率缩小了一点点，以此来实现抽水。

打爆动物产出的金币只与倍率（动物的概率）和当前炮值（消耗金币）有关。





捕鱼概率设计：

https://www.zhihu.com/question/27991970

https://zhuanlan.zhihu.com/p/22885077

宝箱掉落概率：

https://zhuanlan.zhihu.com/p/20311178

https://zhuanlan.zhihu.com/p/37923751





搜索返奖率与期望值的作用。


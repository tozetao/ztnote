进程通信是指俩个不同的进程间可以交换数据，因此操作系统需要提供俩个进程可以同时访问的内存空间。



### 管道

管道属于操作系统资源，它可以用于进程通信。

example：父子进程的交互

```c
#include <stdio.h>
#include <unistd.h>
#define BUF_SIZE 20

int main(int argc, int *argv[])
{
    int fds[2];
    char str1[] = "what are you doing";
    char str2[] = 'response";
    char buffer[BUF_SIZE];
    pid_t pid;
    
    pipe(fds);
    
    pid = fork();
    if(pid == 0){
        write(fds[1], str1, sizeof(str1));
        sleep(2);
        read(fds[0], buffer, BUF_SIZE);
    }else{
        printf("child proc %d\n", pid);
        read(fds[0], buffer, BUF_SIZE);
        printf("parent reevice message %s\n", buffer);
        write(fds[1], str2, sizeof(str2));
        sleep(3);
    }
}
```



### 双向通信

通过管道父子进程是可以双向通信的，不建议使用一个管道来进行数据相互交换，因为向管理传输数据时，进入管道的数据就成了无主数据，也就是说先执行read()函数的进程将得到数据，这可能会导致另外一个进程无法读取到数据。



双向通信建议使用俩个管道，每个通道负责各自的数据流。



### API

```c
#include <unistd.h>
int pipe(int filedes[2]);
```

成功返回0，失败返回-1。

- filedes[0]：管道出口，用于接收数据，具体指通过管道接收数据时使用的文件描述符
- filedes[1]：管道入口，用户写入数据，具体指通过管道传输数据时使用的文件描述符


- accept(int sock, struct sockaddr *addr, socklen_t * addrlen)

  sock是服务器套接字文件描述符，addr指针用于保存连接请求的客户端地址信息，addrlen存储客户端地址长度。

  服务器端套接字相当于门卫，用于等待连接请求并存储连接请求到队列中；受理连接请求并与客户端连接请求进行交换数据需要另外一个套接字

  accpet()函数负责处理请求，它会从连接请求队列中取出当前要处理的连接请求，创建用于数据I/O的套接字，I/O套接字是自动创建的，与客户端建立连接也是自动化的。

  注：如果连接请求队列为空，accept()函数是不会返回的，程序将会阻塞直到队列中有新的连接



### TCP客户端

- socket()

  创建客户端套接字

  ​

- connect()

  connect()函数会使用创建的套接字向服务端发起请求，在服务端listen()调用创建请求连接等待队列后，客户端即可请求连接。

  connect()函数会在服务端接收连接请求后返回或者网络连接中断返回。这里的接收连接请求是指服务端将连接请求加入到等待队列中，因此connect()函数返回后并不会立即进行数据交换。

  真正进行数据交换是在服务端accept()函数执行之后，这时候客户端connect()函数也执行完毕，然后服务端和客户端相互进行I/O交互。

  ​

- read()/write()

- close()

客户端套接字的IP地址和端口是在调用connect()函数时自动分配的，无需调用bind()函数进行分配。



TCP服务端和TCP客户端并不是独立的，俩者是相互关联的。

服务器在调用listen()函数进入等待连接请求状态时，TCP客户端才能通过connect()进行连接，同时要注意的是客户端调用connect()之前，服务端可能会进入accept()阶段，这时候会进入阻塞状态直到客户端调用connect()函数为止。



## 4. 数据备份
mysql提供了俩种方式对数据进行备份。
在公司中，都会定时对数据进行备份，防止数据库被黑或者出现问题。

a.对数据内容进行备份。(表中的数据)
b.对数据结构及其内容进行备份(表的结构语句+数据内容)，备份的是SQL语句。

3.1 数据内容备份与还远
将表中的数据值(没有字段名字)，通过某种形式保存到外部文件中。

语法：select 字段列表 into outfile 文件路径 [fileds格式][lines格式] from 表名
例：select * into outfile 'd:/student.txt' from pro_student;
PS：文件路径要用引号括起来。

fileds格式
enclosed by：字段用什么包裹，默认是没有，
terminated by：字段与字段直接用什么分开，默认的是\t。
escaped by：字段如果碰到特殊符号使用什么转义，默认\\
lines格式
terminated by：行以什么结束，默认是\r\n。
starting by：行以什么开始，默认是''。

格式使用示例
select * into outfile
'd:/test.txt' 
fields enclosed by '"' 
terminated by '---' 
lines starting by 'fuck' 
from pro_student;
注：备份数据的时候，文件必须不存在，mysql不会修改。

3.2 数据内容还原操作
将外部对应的文件信息里面的内容读取出来放到对应的数据表中，所有的数据还远必须与数据备份时使用的格式完全一致。
语法：load data infile 文件名 into table 表名 [fileds格式][lines格式]
示例：
delete from pro_student;
load data infile 'd:/student.txt' into table pro_student;

--按照格式还原
load data infile 'd:/test.txt' into table pro_student
fields enclosed by '"' 
terminated by '---' 
lines starting by 'fuck';
3.3 SQL备份
将数据表的结构，以及数据进行备份，但是备份的形式是以SQL语句的形式存在。

mysql提供了一个备份的客户端，mysqldump.exe，注意是客户端啊，mysql.exe也是一个客户端。
备份语法：mysqldump.exe 连接认证(hpup) 数据库 数据表 数据表 ...>数据文件路径
例：mysqldump.exe -hlocalhost -uroot -proot project pro_student pro_class pro_user>d:/project.sql
PS：不写数据表，写数据库直接对数据库做备份。

3.4 SQL还原
mysql提供了俩种还原方式：外部方式、内部方式。
外部方式：mysql.exe
语法：mysql.exe 连接认证 数据库 < 数据源(即数据路径)
例：mysql.exe -hlocalhost -uroot -proot project < d:/project.sql
注：unknow database：一般是指客户端找不到数据库。
这种SQL语句还原，要先创建好数据库。
内部方式：SQL语句还原
语法：source 数据源(数据路径)
例：source 'd:/project.sql';
关于\斜杠，这个叫做反斜杠，在任何语言中，反斜杠都是被当作转义符使用的。
缺点：一备份必须备份全部数据，备份和还原都很痛苦。

增量备份：定义一个时间，每次都日志里面备份从上一个时间点到当前时间的数据操作。
备份效率高，而且不会很大。

3.5 数据文件备份
直接将数据库的Data目录下对应的表文件进行备份。
备份需要区分存储引擎：
Myisam：
直接备份表对应的三个文件，一个结构文件、索引文件、数据文件
frm、myd、myi、如果想在其他数据库中使用，直接将三个文件复制过去就好了。
mysql/data/数据库
Myisam这种文件我们也要精彩备份，怕文件损坏。
InnoDB：
需要备份表的结构文件(frm文件)，还需要备份数据存储文件ibdata1，如果想在其他数据库中用(如果是同一个数据库环境，比如自己机器的数据库环境)，如果需要跨环境，那么需要覆盖ibdata1文件，但是一旦覆盖就会出现问题，自身数据库有InnoDB对应数据库的表的数据，强行强行你的所有数据表，都会查询补刀数据
所有InnoDB这种备份方式很少用。
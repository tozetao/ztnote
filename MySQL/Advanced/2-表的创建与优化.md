## 列选择原则

### 1. 字段类型优先级
优先级：整型 > date/time > enum > char/varchar > blob。

因为整型、time运算快，节省空间，char和varchar要考虑字符集的转换与排序时的校对集，速度相对较慢，字符型

blob类型无法使用内存临时表，一但涉及到blob的排序，mysql会在磁盘上建立临时表来进行排序，速度就很慢。

### 2. 字段取值范围
根据业务场景设置，例如smallint、varchar(N)，这是因为大的字段浪费内存，影响速度，

以varchar(10)和varchar(300)进行比较，虽然存储的内容大小相同，但是在表联查的时候，varchar(300)耗费更多内存空间。

### 3. 避免用null
因为null不利于索引，要用特殊字符来标记，会多占用1个字节，这样在磁盘上占用的空间更大。

### 4. enum列说明
enum列是枚举，在mysql中是用整型来存储的。

enum的关联查询：
- enum的优势在于，当char非常长的时候，enum仍然是整形固定长度，当查询的数据量越大时，enum的优势越明显。
- enum列与enum列关联查询最快
- enum列与(var)char关联比较的时候要转化，要花时间。
- enum与(var)char关联，因为要转化所以比enum<->enum，char<->char这俩种关联方式要慢，但是有时候也这样用，就是因为在数据量特别大的时候可以节省I/O。

这里视频没有说清楚，我理解的比较应该是用enum字段的值做条件判断，enum如果跟varchar进行比较，速度会比较慢，因为本身它的值存储都是用整型的，如果使用char类型比较，需要做一个转换。

## 列的实验
### 1. null大小的实验测试

null的大小测试，建立俩张表，一个允许null，一个不允许，各自插入1W条数据，查看索引文件大小。、
```sql
create table t1(
	name char(1) not null default '',
	key(name)
)engine=myisam charset=utf8;

create table t2(
	name char(1),
	key(name)
)engine=myisam charset=utf8;

```

在utf8字符串中，一个字符占3个索引长度，
explain select * from t1 \G;
这个命令就可以分析出占用的大小了。

key_len:索引长度，这里应该是字节长度为单位大小。

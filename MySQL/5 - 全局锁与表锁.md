锁是指在并发访问下，控制访问共享资源的规则。

- DML

  data manipulation language，数据操作语言。

  比如select、update、insert、delete，主要对数据库的数据进行操作。

- DDL

  data definition language，数据定义语言。

  用于定义或改变表的结构，数据类型，表之间的链接和约束等初始化工作。



全局锁

作用

应用场景

全局锁的影响



- flush tables

  强制关闭所有打开的表，并刷新预准备的语句缓存。

  > flush tables with read lock

  该语句会关闭所有打开的表并使用全局锁锁定所有数据库的表，使用unlock tables即可解除锁定。

  有关flush命令的语法可以参考手册：https://dev.mysql.com/doc/refman/8.0/en/flush.html



metadata lock

对一个表做增删改查操作的时候，加MDL读锁。

对一个表结构做更改的时候，加MDL写锁。

- 读锁之间不互斥因此多个线程可以对同一张表进行增删改查。

  如果一个线程正在修改数据，另一个线程在查询或修改这条数据时，在InnoDB引擎下由于行锁会被阻塞，Myisam引擎不清楚。

  如果一个线程正在读取数据时，另一个线程删除了读取的数据，会发生什么?

- 读写锁、写锁之间是互斥的，因此一个线程修改一张表的结构，另一个线程要修改表结构时会被阻塞。亦或者是一个线程对一张表做

